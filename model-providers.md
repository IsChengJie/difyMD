# Model Providers

> Configure AI model access for your workspace—the foundation that powers all your applications

Model providers give your workspace access to AI models. Every application you build needs models to function, and configuring providers at the workspace level means all team members can use them across all projects.

## System vs Custom Providers

**System Providers** are managed by Dify. You get immediate access to models without setup, billing through your Dify subscription, and automatic updates when new models become available. Best for getting started quickly.

**Custom Providers** use your own API keys for direct access to model providers like OpenAI, Anthropic, or Google. You get full control, direct billing, and often higher rate limits. Best for production applications.

You can use both simultaneously—system providers for prototyping, custom providers for production.

## Configure Custom Providers

Only workspace admins and owners can configure model providers. The process is consistent across providers:

<Steps>
  <Step title="Navigate to Settings → Model Providers">
    Access the model provider configuration in your workspace settings.
  </Step>

  <Step title="Select your provider">
    Choose from OpenAI, Anthropic, Google, Cohere, or other supported providers.
  </Step>

  <Step title="Add credentials">
    Enter your API key and any additional configuration required by the provider.
  </Step>

  <Step title="Test and save">
    Dify validates your credentials before making the provider available to your workspace.
  </Step>
</Steps>

## Supported Providers

**Large Language Models:**

* OpenAI (GPT-4, GPT-3.5-turbo)
* Anthropic (Claude)
* Google (Gemini)
* Cohere
* Local models via Ollama

**Embedding Models:**

* OpenAI Embeddings
* Cohere Embeddings
* Azure OpenAI
* Local embedding models

**Specialized Models:**

* Image generation (DALL-E, Stable Diffusion)
* Speech (Whisper, ElevenLabs)
* Moderation APIs

## Provider Configuration Examples

<Tabs>
  <Tab title="OpenAI">
    **Required:** API Key from OpenAI Platform

    **Optional:** Custom base URL for Azure OpenAI or proxies, Organization ID for organization-scoped usage

    **Available Models:** GPT-4, GPT-3.5-turbo, DALL-E, Whisper, Text embeddings
  </Tab>

  <Tab title="Anthropic">
    **Required:** API Key from Anthropic Console

    **Available Models:** Claude 3 (Opus, Sonnet, Haiku), Claude 2.1, Claude Instant
  </Tab>

  <Tab title="Local (Ollama)">
    **Required:** Ollama server URL (typically [http://localhost:11434](http://localhost:11434))

    **Setup:** Install Ollama, pull models (`ollama pull llama2`), configure Dify connection

    **Benefits:** Complete data privacy, no external API costs, custom model fine-tuning
  </Tab>
</Tabs>

## Manage Model Credentials

Add multiple credentials for a model provider's predefined and custom models, and easily switch between, delete, or modify these credentials.

Here are some scenarios where adding multiple credentials is particularly helpful:

* **Environment Isolation**: Configure separate model credentials for different environments, such as development, testing, and production. For example, use a rate-limited credential in the development environment for debugging, and a paid credential with stable performance and a sufficient quota in the production environment to ensure service quality.

* **Cost Optimization**: Add and switch between multiple credentials from different accounts or model providers to maximize the use of free or low-cost quotas, thereby reducing application development and operational costs.

* **Model Testing**: During model fine-tuning or iteration, you may create multiple model versions. By adding credentials for these different versions, you can quickly switch between them to test and evaluate their performance.

<Tip>
  Use multiple credentials to configure load balancing for a model.
</Tip>

<Tabs>
  <Tab title="Predefined Model">
    After installing a model provider and configuring the first credential, click **Config** in the upper-right corner to perform the following actions:

    * Add a new credential
    * Select a credential as the default for all predefined models
    * Edit a credential
    * Delete a credential

    <Note>
      If the default credential is deleted, you must manually specify a new one.
    </Note>

        <img src="https://mintcdn.com/dify-6c0370d8/DLsSss2CKEMuNxH2/images/predefined_model_credential.png?fit=max&auto=format&n=DLsSss2CKEMuNxH2&q=85&s=ceeac0a982d23694a84aca9bb6cd403a" alt="Manage credentials for predefined models" data-og-width="1538" width="1538" data-og-height="678" height="678" data-path="images/predefined_model_credential.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dify-6c0370d8/DLsSss2CKEMuNxH2/images/predefined_model_credential.png?w=280&fit=max&auto=format&n=DLsSss2CKEMuNxH2&q=85&s=c3a961de219bf20c476239957fddeb7a 280w, https://mintcdn.com/dify-6c0370d8/DLsSss2CKEMuNxH2/images/predefined_model_credential.png?w=560&fit=max&auto=format&n=DLsSss2CKEMuNxH2&q=85&s=051a4a95e0c7b19c85b4629294839c08 560w, https://mintcdn.com/dify-6c0370d8/DLsSss2CKEMuNxH2/images/predefined_model_credential.png?w=840&fit=max&auto=format&n=DLsSss2CKEMuNxH2&q=85&s=24f4f67196e6f84df96ea69f562f17d2 840w, https://mintcdn.com/dify-6c0370d8/DLsSss2CKEMuNxH2/images/predefined_model_credential.png?w=1100&fit=max&auto=format&n=DLsSss2CKEMuNxH2&q=85&s=c29df3acab25c5f0754e127f9ba21e4d 1100w, https://mintcdn.com/dify-6c0370d8/DLsSss2CKEMuNxH2/images/predefined_model_credential.png?w=1650&fit=max&auto=format&n=DLsSss2CKEMuNxH2&q=85&s=64bf4de0eb78a39dfa265d19ab386d3d 1650w, https://mintcdn.com/dify-6c0370d8/DLsSss2CKEMuNxH2/images/predefined_model_credential.png?w=2500&fit=max&auto=format&n=DLsSss2CKEMuNxH2&q=85&s=14bd05781cc417315e3686c91583bf6c 2500w" />
  </Tab>

  <Tab title="Custom Model">
    ### Manage Credentials for a Single Custom Model

    After installing a model provider and adding a custom model, follow these steps:

    1. In the model list, click the corresponding **Config**.

    2. In the **Specify model credential** panel, click the default credential to open the credential list, then perform the following actions:

       * Add a new credential

       * Select a credential as the default for that custom model

       * Edit a credential

       * Delete a credential

    <Warning>
      If you delete the only credential for a custom model, the model will also be deleted.
    </Warning>

        <img src="https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/custom_model_credential.png?fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=8dbcf0d42fd2b24dc16ed428ed477f05" alt="Manage credentials for a single custom model" data-og-width="1328" width="1328" data-og-height="722" height="722" data-path="images/custom_model_credential.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/custom_model_credential.png?w=280&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=736bb29c0a120c4bbf44ded9260423cf 280w, https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/custom_model_credential.png?w=560&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=f4955cfdb66bae67daa48e7ce31aefb9 560w, https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/custom_model_credential.png?w=840&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=17435e4fdb5a79dc3510232a0458c77e 840w, https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/custom_model_credential.png?w=1100&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=c6ef0c338132c0926e4cb4f79e6eb065 1100w, https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/custom_model_credential.png?w=1650&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=4e16ef18349d93eb4d21ba97a28c7afe 1650w, https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/custom_model_credential.png?w=2500&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=873c52bc5027055a6d7f9b9d71eab38b 2500w" />

    <Info>
      When you add a new custom model with a name and type identical to an existing custom model, the system will add the new credential to that existing model rather than creating a duplicate.
    </Info>

    ### Manage Credentials for All Custom Models

    Click **Manage Credentials** to view, edit, or delete the credentials for all custom models.

        <img src="https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/custom_model_credential_list.png?fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=ea4d55f05de45cbfb29325d118911afe" alt="Manage credentials for all custom models" data-og-width="1528" width="1528" data-og-height="692" height="692" data-path="images/custom_model_credential_list.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/custom_model_credential_list.png?w=280&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=8f60b0369521085af80755ab82db1966 280w, https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/custom_model_credential_list.png?w=560&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=1df0d3399610a10a77f08a116186788b 560w, https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/custom_model_credential_list.png?w=840&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=76d116d305befbfd305595ef36cd358f 840w, https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/custom_model_credential_list.png?w=1100&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=427e5112372003ee0257bbf8ac047e58 1100w, https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/custom_model_credential_list.png?w=1650&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=ce57c3bd860a569ceee4797589d8429f 1650w, https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/custom_model_credential_list.png?w=2500&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=31460ec37e6e34f35a38a097060a55b6 2500w" />

    After a custom model is removed, its credentials will remain in the **Manage Credentials** list. When you click **Add Model**, the system will display all removed custom models whose credentials still exist, allowing you to quickly re-add them.

        <img src="https://mintcdn.com/dify-6c0370d8/DLsSss2CKEMuNxH2/images/removed_custom_model_re-add.png?fit=max&auto=format&n=DLsSss2CKEMuNxH2&q=85&s=f9c936b22c58e33a454e276fc7123808" alt="Removed models displayed for quick re-add" data-og-width="1534" width="1534" data-og-height="564" height="564" data-path="images/removed_custom_model_re-add.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dify-6c0370d8/DLsSss2CKEMuNxH2/images/removed_custom_model_re-add.png?w=280&fit=max&auto=format&n=DLsSss2CKEMuNxH2&q=85&s=a2cfc49da609639d98aa912a3aea881a 280w, https://mintcdn.com/dify-6c0370d8/DLsSss2CKEMuNxH2/images/removed_custom_model_re-add.png?w=560&fit=max&auto=format&n=DLsSss2CKEMuNxH2&q=85&s=e4874ae526b6d3d5a3927f878d7bd2eb 560w, https://mintcdn.com/dify-6c0370d8/DLsSss2CKEMuNxH2/images/removed_custom_model_re-add.png?w=840&fit=max&auto=format&n=DLsSss2CKEMuNxH2&q=85&s=271adcde7cafa68bcfbc5ac024e60285 840w, https://mintcdn.com/dify-6c0370d8/DLsSss2CKEMuNxH2/images/removed_custom_model_re-add.png?w=1100&fit=max&auto=format&n=DLsSss2CKEMuNxH2&q=85&s=c102aa21570b1db982238fbb3356b60d 1100w, https://mintcdn.com/dify-6c0370d8/DLsSss2CKEMuNxH2/images/removed_custom_model_re-add.png?w=1650&fit=max&auto=format&n=DLsSss2CKEMuNxH2&q=85&s=a60050a7f68d3591a7a8e0050146a849 1650w, https://mintcdn.com/dify-6c0370d8/DLsSss2CKEMuNxH2/images/removed_custom_model_re-add.png?w=2500&fit=max&auto=format&n=DLsSss2CKEMuNxH2&q=85&s=8d7ddb3ab7d9d3124fa86b4b27dec85c 2500w" />

    If you delete all credentials for a removed custom model from the **Manage Credentials** list, that model will no longer appear when you click **Add Model**.
  </Tab>
</Tabs>

## Configure Model Load Balancing

<Info>
  Load balancing is a paid feature. You can enable it through [a paid SaaS subscription or an Enterprise license](https://dify.ai/pricing).
</Info>

Model providers typically enforce rate limits on API access within a specific timeframe to ensure stability and fair use. For enterprise applications, a high volume of concurrent requests from a single credential can easily trigger these limits, disrupting user access.

An effective solution is load balancing, which distributes request traffic across multiple model credentials. This prevents rate limit issues and single points of failure, ensuring business continuity and faster response times for all users.

Dify employs a round-robin strategy for load balancing, sequentially routing model requests to each credential in the load balancing pool. If a credential hits a rate limit, it is temporarily removed from rotation for one minute to avoid futile retries.

To configure load balancing for a model, follow these steps:

1. In the model list, find the target model, click the corresponding **Config**, and select **Load balancing**.

2. In the load balancing pool, click **Add credential** to select from existing credentials or add a new one.

   <Info>
     **Default Config** refers to the default credential currently specified for that model.
   </Info>

   <Tip>
     If a credential has a higher quota or better performance, you can add it multiple times to increase its weight in the load balancing rotation, allowing it to handle a larger share of the request load.
   </Tip>

   <img src="https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/add_load_balancing_credential.png?fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=e689bbc418d53cce8344b7c44c0fe694" alt="Add credentials for load balancing" width="400" data-og-width="1194" data-og-height="872" data-path="images/add_load_balancing_credential.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/add_load_balancing_credential.png?w=280&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=d7f48a7820d0af3bcc9ad7f24b051710 280w, https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/add_load_balancing_credential.png?w=560&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=01d5e8e1250b99b3b33e0e813982abe8 560w, https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/add_load_balancing_credential.png?w=840&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=3c29b6eec529e8a245606fff1f4d7b1c 840w, https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/add_load_balancing_credential.png?w=1100&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=a18953c51ac9f524b43c07d6ee2b247d 1100w, https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/add_load_balancing_credential.png?w=1650&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=60a649b3d7b36df42f253311bb4e4427 1650w, https://mintcdn.com/dify-6c0370d8/7Ipos5aBzrNU-g5O/images/add_load_balancing_credential.png?w=2500&fit=max&auto=format&n=7Ipos5aBzrNU-g5O&q=85&s=f8a87b70255870ad3328a3ce1aeda830 2500w" />

3. Enable at least two credentials in the load balancing pool, then click **Save**. Models with load balancing enabled will be marked with a special icon.

   <img src="https://mintcdn.com/dify-6c0370d8/ZRNvvxF2tqKWAA14/images/load_balancing_icon.png?fit=max&auto=format&n=ZRNvvxF2tqKWAA14&q=85&s=6ddc4ed3e7c5f65308e9644620e2f76d" alt="Load balancing icon" data-og-width="2564" width="2564" data-og-height="454" height="454" data-path="images/load_balancing_icon.png" data-optimize="true" data-opv="3" srcset="https://mintcdn.com/dify-6c0370d8/ZRNvvxF2tqKWAA14/images/load_balancing_icon.png?w=280&fit=max&auto=format&n=ZRNvvxF2tqKWAA14&q=85&s=ea6683b1a346af5ae9ba2553152f7fb0 280w, https://mintcdn.com/dify-6c0370d8/ZRNvvxF2tqKWAA14/images/load_balancing_icon.png?w=560&fit=max&auto=format&n=ZRNvvxF2tqKWAA14&q=85&s=7e1893905cf2b71dfb5f389786f4175e 560w, https://mintcdn.com/dify-6c0370d8/ZRNvvxF2tqKWAA14/images/load_balancing_icon.png?w=840&fit=max&auto=format&n=ZRNvvxF2tqKWAA14&q=85&s=b02a08ddfa2840c4a3707f76904d2572 840w, https://mintcdn.com/dify-6c0370d8/ZRNvvxF2tqKWAA14/images/load_balancing_icon.png?w=1100&fit=max&auto=format&n=ZRNvvxF2tqKWAA14&q=85&s=a8dca01e0491a02b24737a9ec0f74443 1100w, https://mintcdn.com/dify-6c0370d8/ZRNvvxF2tqKWAA14/images/load_balancing_icon.png?w=1650&fit=max&auto=format&n=ZRNvvxF2tqKWAA14&q=85&s=149bd56ca7014db77c1c418665baa71f 1650w, https://mintcdn.com/dify-6c0370d8/ZRNvvxF2tqKWAA14/images/load_balancing_icon.png?w=2500&fit=max&auto=format&n=ZRNvvxF2tqKWAA14&q=85&s=a9c8c66f5079cb8180636241ca3d2789 2500w" />

<Info>
  When you switch from load-balancing mode back to the default single-credential mode, your load-balancing configuration is preserved for future use.
</Info>

## Access and Billing

System providers are billed through your Dify subscription with usage limits based on your plan. Custom providers bill you directly through the provider (OpenAI, Anthropic, etc.) and often provide higher rate limits.

Team access follows workspace permissions:

* **Owners/Admins** can configure, modify, and remove providers
* **Editors/Members** can view available providers and use them in applications

<Warning>
  API keys are stored securely but grant workspace-wide model access. Only give admin privileges to trusted team members who should have billing responsibility.
</Warning>

## Troubleshooting

**Authentication Failed:** Verify API key accuracy, check expiration, ensure sufficient credits, confirm key permissions.

**Model Not Available:** Check provider configuration includes the model, verify API key tier access, refresh provider settings.

**Rate Limits:** Upgrade provider account, implement request queuing, consider custom providers for higher limits.


---

> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://docs.dify.ai/llms.txt